# 基金顾问多代理系统

这是一个基于Amazon Bedrock构建的基金顾问多代理系统，利用生成式AI技术为用户提供智能化的基金投资建议和分析服务。

## 项目概述

本项目使用Amazon Bedrock Agents技术构建了一个多代理协作系统，专注于基金投资领域。系统由多个专业代理组成，每个代理负责特定的分析和决策任务，共同为用户提供全面的基金投资建议。

系统能够：
- 分析特定基金的投资价值和风险
- 根据用户的投资偏好推荐合适的基金产品
- 提供基金绩效、持仓、基金经理和费用等多维度分析
- 整合多个专家意见，形成全面的投资建议

## 项目结构

项目包含以下主要组件：

```
fsi-bedrock-agent/
├── assets/                      # 资源文件
├── bedrock-agent-kb/            # 基础知识库代理示例
├── bedrock-agent-only/          # 基础代理示例
├── bedrock-multi-agent/         # 多代理系统基础实现
└── fund-advisor-multi-agent/    # 基金顾问多代理系统实现
    ├── bin/                     # CDK入口点
    ├── config/                  # 配置文件
    │   └── api-schemas/         # API模式定义
    ├── lambda/                  # Lambda函数
    │   ├── fund-data/           # 基金数据处理函数
    │   ├── fund-search/         # 基金搜索函数
    │   └── orchestration/       # 代理协作编排函数
    ├── lib/                     # CDK构造
    │   ├── constructs/          # 自定义构造
    │   │   ├── analysis-agents.ts       # 分析代理
    │   │   ├── expert-agents.ts         # 专家代理
    │   │   ├── fund-selector-agent.ts   # 基金筛选代理
    │   │   ├── knowledge-base.ts        # 知识库
    │   │   ├── portfolio-manager.ts     # 投资组合管理代理
    │   │   └── user-profile-agent.ts    # 用户画像代理
    │   └── fund-advisor-multi-agent-stack.ts  # 主堆栈定义
    └── test/                    # 测试文件
```

## 主要功能

### 1. 基金分析

系统可以分析用户提供的基金，评估其投资价值和风险，提供全面的分析报告，包括：
- 基金基本信息（类型、风险等级、规模等）
- 历史业绩分析
- 持仓分析
- 基金经理评估
- 费用结构分析
- 专家观点整合

### 2. 基金推荐

系统可以根据用户的投资偏好，推荐合适的基金产品：
- 分析用户的风险偏好、投资期限和行业偏好
- 筛选符合用户需求的基金
- 由专家代理评估推荐结果
- 生成最终推荐报告

### 3. 多代理协作

系统采用多代理协作架构，包括：
- **投资组合管理代理**：作为主代理，协调其他代理的工作
- **专家代理**：
  - 基金策略代理
  - 资产配置代理
  - 市场趋势代理
- **分析代理**：
  - 绩效分析代理
  - 持仓分析代理
  - 基金经理分析代理
  - 费用分析代理
- **用户画像代理**：分析用户的投资偏好和需求
- **基金筛选代理**：根据用户需求筛选合适的基金

## 技术架构

系统基于AWS云服务构建，主要使用以下技术：

- **Amazon Bedrock**：提供基础大语言模型能力
- **Bedrock Agents**：构建智能代理，处理用户请求
- **Bedrock Knowledge Base**：存储和检索基金相关知识
- **AWS Lambda**：处理基金数据和代理协作逻辑
- **Amazon S3**：存储基金数据和知识库文档
- **AWS CDK**：基础设施即代码，定义和部署AWS资源

架构图：

```
用户 --> 投资组合管理代理 --> 编排Lambda函数 --> 专家代理/分析代理/用户画像代理/基金筛选代理
                          |
                          v
                       基金知识库 <-- 基金数据Lambda函数 <-- 外部数据源
```

## 部署指南

### 前提条件

- AWS账户
- Node.js 14.x或更高版本
- AWS CDK 2.x
- Python 3.10或更高版本（用于Lambda函数）

### 部署步骤

1. 克隆代码库
   ```
   git clone <repository-url>
   cd fsi-bedrock-agent
   ```

2. 安装依赖
   ```
   cd fund-advisor-multi-agent
   npm install
   ```

3. 配置AWS凭证
   ```
   aws configure
   ```

4. 部署CDK堆栈
   ```
   npx cdk deploy
   ```

5. 部署完成后，记录输出的资源ARN，包括：
   - 投资组合管理代理ID
   - 投资组合管理代理别名ID
   - 基金知识库ID
   - 基金数据存储桶名称

## 使用说明

部署完成后，您可以通过以下方式使用系统：

1. **通过AWS控制台**：
   - 访问Amazon Bedrock控制台
   - 在"Agents"部分找到"投资组合管理代理"
   - 使用"Test"功能与代理交互

2. **通过API集成**：
   - 使用AWS SDK调用Bedrock Agent API
   - 使用输出的代理别名ID进行调用

### 示例查询

- "分析基金000001的投资价值"
- "我是一个风险偏好中等、投资期限3-5年的投资者，请推荐适合我的基金"
- "分析易方达消费行业股票基金的持仓结构"
- "比较华夏成长和天弘沪深300指数基金的表现"

## 数据来源

系统使用AKShare库获取基金数据，包括：
- 基金基本信息
- 历史净值数据
- 持仓数据
- 基金经理信息
- 费用结构

同时，系统也包含备用数据，以防API调用失败。

## 许可证

[添加许可证信息]
